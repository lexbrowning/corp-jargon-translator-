<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Corporate Jargon Translator</title>
  <meta name="description" content="Translate between plain language and corporate jargon, in both directions. Add your own terms and share results." />
  <style>
    :root{
      --bg:#0b1020;            /* deep navy */
      --panel:#141a33;         /* card bg */
      --muted:#aab3cf;         /* muted text */
      --text:#eaf0ff;          /* main text */
      --accent:#6aa0ff;        /* primary */
      --accent-2:#89d185;      /* success */
      --warn:#ffb454;          /* warning */
      --danger:#ff7a7a;        /* danger */
      --mark:#2a3a66;          /* highlight bg */
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial; background:linear-gradient(180deg,#0b1020,#0a0e1b 40%,#0b1020 100%); color:var(--text);
    }
    header{padding:28px 20px 0; text-align:center}
    h1{margin:0 0 4px; font-size:clamp(22px, 2.2vw + 14px, 36px); letter-spacing:.3px}
    .sub{color:var(--muted); margin:0 0 22px; font-size:clamp(12px, .6vw + 10px, 15px)}

    .wrap{max-width:1100px; margin:0 auto; padding:22px;}
    .card{background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid rgba(255,255,255,.06)}

    .grid{display:grid; grid-template-columns:1fr; gap:16px}
    @media (min-width: 900px){ .grid{ grid-template-columns:1fr 1fr } }

    .controls{display:flex; flex-wrap:wrap; align-items:center; gap:10px; padding:14px 16px; border-bottom:1px solid rgba(255,255,255,.08)}
    .controls .spacer{flex:1}

    .seg{ display:inline-flex; background:#0f1430; padding:4px; border-radius:999px; border:1px solid rgba(255,255,255,.08) }
    .seg input{ position:absolute; left:-9999px }
    .seg label{ cursor:pointer; padding:8px 14px; border-radius:999px; color:var(--muted); font-size:14px; user-select:none }
    .seg input:checked + label{ background:var(--accent); color:#061126; font-weight:600 }

    .btn{ appearance:none; border:1px solid rgba(255,255,255,.12); color:var(--text); background:#101737; padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer }
    .btn:hover{ border-color:rgba(255,255,255,.28) }
    .btn.primary{ background:var(--accent); color:#071326; border:0 }
    .btn.good{ background:var(--accent-2); color:#062212; border:0 }
    .btn.warn{ background:var(--warn); color:#1d1405; border:0 }
    .btn.ghost{ background:transparent }

    .area{ padding:16px }
    textarea{ width:100%; min-height:220px; background:#0f1430; color:var(--text); border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:14px 12px; resize:vertical; line-height:1.45 }
    .out{ background:#0f1430; border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:14px 12px; min-height:220px; line-height:1.6; white-space:pre-wrap }
    .out mark{ background:var(--mark); color:#dbe6ff; padding:0 .2em; border-radius:6px }

    .row{ display:flex; flex-wrap:wrap; align-items:center; gap:10px }
    .note{ color:var(--muted); font-size:13px }

    details{ background:#0f1430; border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:12px 14px; }
    summary{ cursor:pointer; font-weight:700 }
    table{ width:100%; border-collapse:collapse; margin-top:8px }
    th,td{ border-bottom:1px dashed rgba(255,255,255,.12); padding:8px 6px; text-align:left }
    td small{ color:var(--muted) }
    input[type="text"]{ width:100%; background:#0f1430; color:var(--text); border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:8px }

    .kbd{ font-family:ui-monospace,SFMono-Regular,Menlo,monospace; background:#0f1430; border:1px solid rgba(255,255,255,.18); padding:2px 6px; border-radius:6px }
    footer{ text-align:center; color:var(--muted); font-size:12px; padding:24px }
  </style>
</head>
<body>
  <header>
    <h1>Corporate Jargon Translator</h1>
    <p class="sub">Translate between plain language and corporate jargon. Add your own terms, highlight changes, and share a link.</p>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="controls">
        <form class="seg" id="modeSeg" aria-label="Translation direction">
          <input type="radio" name="mode" id="m1" value="plain→jargon" checked>
          <label for="m1">Plain → Jargon</label>
          <input type="radio" name="mode" id="m2" value="jargon→plain">
          <label for="m2">Jargon → Plain</label>
        </form>
        <span class="spacer"></span>
        <button class="btn" id="explainBtn" title="Show a summary of replacements">Explain changes</button>
        <button class="btn" id="shareBtn" title="Create a shareable link">Share</button>
        <button class="btn good" id="copyBtn" title="Copy output">Copy</button>
        <button class="btn primary" id="translateBtn" title="Translate (Ctrl+Enter)">Translate</button>
      </div>

      <div class="grid area">
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:8px">
            <strong>Input</strong>
            <span class="note">Tip: Press <span class="kbd">Ctrl</span> + <span class="kbd">Enter</span> to translate</span>
          </div>
          <textarea id="input" placeholder="Type or paste your text..."></textarea>
          <div class="row" style="justify-content:flex-end; margin-top:8px">
            <button class="btn ghost" id="sampleBtn">Insert sample</button>
            <button class="btn warn" id="clearBtn">Clear</button>
          </div>
        </div>
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:8px">
            <strong>Output</strong>
            <label class="row" style="gap:6px; color:var(--muted); font-size:13px">
              <input id="hlToggle" type="checkbox" checked>
              Highlight changes
            </label>
          </div>
          <div id="output" class="out" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <section style="height:12px"></section>

    <section class="card" aria-labelledby="dictTitle">
      <div class="area">
        <h2 id="dictTitle" style="margin:0 0 6px; font-size:20px">Dictionary</h2>
        <p class="note" style="margin:0 0 10px">You can add, edit, import, and export the terms below. Replacements are whole-word and case‑insensitive. Longer phrases run before shorter ones.</p>

        <details>
          <summary>Add a custom pair</summary>
          <div class="grid" style="margin-top:10px">
            <div>
              <label>Plain</label>
              <input type="text" id="newPlain" placeholder="e.g., get approval">
            </div>
            <div>
              <label>Jargon</label>
              <input type="text" id="newJargon" placeholder="e.g., get buy-in">
            </div>
          </div>
          <div class="row" style="margin-top:10px; justify-content:flex-end">
            <button class="btn" id="addPairBtn">Add pair</button>
          </div>
        </details>

        <div class="row" style="justify-content:space-between; margin-top:14px">
          <div class="row" style="gap:8px">
            <button class="btn" id="exportBtn" title="Download your dictionary as JSON">Export JSON</button>
            <label class="btn" for="importFile" style="cursor:pointer">Import JSON</label>
            <input id="importFile" type="file" accept="application/json" style="display:none">
          </div>
          <span class="note">Stored locally in your browser</span>
        </div>

        <div id="dictTableWrap"></div>
      </div>
    </section>

    <footer>
      Built for fun. No data leaves your browser.
    </footer>
  </main>

  <script>
  // ——— Utility: local storage helpers ———
  const storageKey = 'cj_dictionary_v1';
  const getDict = () => JSON.parse(localStorage.getItem(storageKey) || '[]');
  const setDict = (arr) => localStorage.setItem(storageKey, JSON.stringify(arr));

  // ——— Default pairs (seeded once) ———
  const defaultPairs = [
    {plain:"talk in private", jargon:"take this offline"},
    {plain:"talk later", jargon:"circle back"},
    {plain:"quick meeting", jargon:"touch base"},
    {plain:"schedule a meeting", jargon:"put time on the calendar"},
    {plain:"meet", jargon:"sync"},
    {plain:"start", jargon:"kick off"},
    {plain:"finish", jargon:"wrap up"},
    {plain:"cancel", jargon:"sunset"},
    {plain:"delay", jargon:"deprioritize"},
    {plain:"do it later", jargon:"backlog it"},
    {plain:"do it now", jargon:"prioritize"},
    {plain:"hire", jargon:"resource"},
    {plain:"fire", jargon:"reduce headcount"},
    {plain:"cut jobs", jargon:"right-size"},
    {plain:"employees", jargon:"resources"},
    {plain:"people", jargon:"stakeholders"},
    {plain:"customers", jargon:"users"},
    {plain:"clients", jargon:"partners"},
    {plain:"money", jargon:"capital"},
    {plain:"spend", jargon:"invest"},
    {plain:"cheap", jargon:"cost-effective"},
    {plain:"expensive", jargon:"premium"},
    {plain:"get approval", jargon:"get buy-in"},
    {plain:"convince people", jargon:"socialize the idea"},
    {plain:"agree", jargon:"align"},
    {plain:"decision", jargon:"alignment"},
    {plain:"plan", jargon:"roadmap"},
    {plain:"change the plan", jargon:"pivot"},
    {plain:"change", jargon:"iterate"},
    {plain:"test", jargon:"pilot"},
    {plain:"try", jargon:"experiment"},
    {plain:"measure", jargon:"quantify"},
    {plain:"goal", jargon:"KPI"},
    {plain:"goals", jargon:"KPIs"},
    {plain:"results", jargon:"outcomes"},
    {plain:"responsible", jargon:"accountable"},
    {plain:"in charge", jargon:"owning"},
    {plain:"blame", jargon:"post-mortem"},
    {plain:"fix", jargon:"remediate"},
    {plain:"problem", jargon:"challenge"},
    {plain:"problems", jargon:"challenges"},
    {plain:"issue", jargon:"opportunity"},
    {plain:"make sure", jargon:"ensure"},
    {plain:"make", jargon:"create"},
    {plain:"use again", jargon:"repurpose"},
    {plain:"share", jargon:"surface"},
    {plain:"show", jargon:"surface"},
    {plain:"tell", jargon:"communicate"},
    {plain:"clear", jargon:"transparent"},
    {plain:"learn", jargon:"upskill"},
    {plain:"train", jargon:"enable"},
    {plain:"training", jargon:"enablement"},
    {plain:"rules", jargon:"policy"},
    {plain:"deadline", jargon:"target date"},
    {plain:"late", jargon:"slipped"},
    {plain:"on time", jargon:"on track"},
    {plain:"not on time", jargon:"at risk"},
    {plain:"risky", jargon:"aggressive"},
    {plain:"safe", jargon:"conservative"},
    {plain:"simple", jargon:"straightforward"},
    {plain:"complicated", jargon:"complex"},
    {plain:"we do not have enough people", jargon:"we have a capacity constraint"},
    {plain:"we cannot do that", jargon:"that is out of scope"},
    {plain:"I do not know", jargon:"I will follow up offline"},
    {plain:"please remind me", jargon:"let us put a pin in it"},
    {plain:"send me a message", jargon:"reach out"},
    {plain:"email", jargon:"reach out via email"},
    {plain:"call me", jargon:"connect by phone"},
    {plain:"get more information", jargon:"gain visibility"},
    {plain:"understand", jargon:"get visibility"},
    {plain:"priority", jargon:"north star"},
    {plain:"important", jargon:"high priority"},
    {plain:"do not worry", jargon:"this is non-blocking"},
    {plain:"blocker", jargon:"blocking issue"},
    {plain:"work together", jargon:"collaborate"},
    {plain:"work harder", jargon:"double down"},
    {plain:"work faster", jargon:"accelerate"},
    {plain:"slow down", jargon:"decelerate"},
    {plain:"make smaller", jargon:"downscope"},
    {plain:"make bigger", jargon:"scale"},
    {plain:"details", jargon:"granularity"},
    {plain:"detailed", jargon:"granular"},
    {plain:"overview", jargon:"high-level"},
    {plain:"see", jargon:"have visibility into"},
    {plain:"use", jargon:"leverage"},
    {plain:"help", jargon:"support"}
  ];

  // Seed defaults once
  if (!localStorage.getItem(storageKey)) setDict(defaultPairs);

  // ——— DOM references ———
  const inputEl = document.getElementById('input');
  const outputEl = document.getElementById('output');
  const translateBtn = document.getElementById('translateBtn');
  const copyBtn = document.getElementById('copyBtn');
  const explainBtn = document.getElementById('explainBtn');
  const clearBtn = document.getElementById('clearBtn');
  const sampleBtn = document.getElementById('sampleBtn');
  const hlToggle = document.getElementById('hlToggle');
  const modeSeg = document.getElementById('modeSeg');
  const exportBtn = document.getElementById('exportBtn');
  const importFile = document.getElementById('importFile');
  const newPlain = document.getElementById('newPlain');
  const newJargon = document.getElementById('newJargon');
  const addPairBtn = document.getElementById('addPairBtn');
  const dictTableWrap = document.getElementById('dictTableWrap');
  const shareBtn = document.getElementById('shareBtn');

  // ——— Helpers: regex escape and case preservation ———
  const esc = s => s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  function applyCase(source, replacement){
    if (source.toUpperCase() === source) return replacement.toUpperCase();
    if (source[0] && source[0] === source[0].toUpperCase() && source.slice(1) === source.slice(1).toLowerCase())
      return replacement.charAt(0).toUpperCase() + replacement.slice(1);
    return replacement;
  }

  // ——— Core translation ———
  function sortByLenDesc(arr, key){
    return [...arr].sort((a,b)=> (b[key]||'').length - (a[key]||'').length);
  }

  function translate(text, direction){
    const dict = getDict();
    const pairs = sortByLenDesc(dict, direction === 'plain→jargon' ? 'plain' : 'jargon');

    let changed = [];
    let out = text;

    // Use markers to wrap changes, replaced after all substitutions
    const OPEN = '\uE000';
    const CLOSE = '\uE001';

    for (const p of pairs){
      const src = direction === 'plain→jargon' ? p.plain : p.jargon;
      const dst = direction === 'plain→jargon' ? p.jargon : p.plain;
      if (!src || !dst) continue;

      const rx = new RegExp(`\\b${esc(src)}\\b`, 'gi');
      out = out.replace(rx, (m)=>{
        const repl = applyCase(m, dst);
        changed.push({from:m, to:repl});
        return OPEN + repl + CLOSE;
      });
    }

    return { 
      text: out.replaceAll(OPEN, hlToggle.checked ? '<mark>' : '').replaceAll(CLOSE, hlToggle.checked ? '</mark>' : ''),
      changes: changed
    };
  }

  function currentMode(){
    const el = modeSeg.querySelector('input[name="mode"]:checked');
    return el ? el.value : 'plain→jargon';
  }

  function run(){
    const {text} = translate(inputEl.value, currentMode());
    outputEl.innerHTML = text || '';
  }

  // ——— UI actions ———
  translateBtn.addEventListener('click', run);
  hlToggle.addEventListener('change', run);
  modeSeg.addEventListener('change', run);
  inputEl.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) { e.preventDefault(); run(); }
  });

  copyBtn.addEventListener('click', async ()=>{
    const tmp = document.createElement('textarea');
    tmp.value = outputEl.textContent || '';
    document.body.appendChild(tmp); tmp.select();
    try{ document.execCommand('copy'); copyBtn.textContent = 'Copied'; setTimeout(()=>copyBtn.textContent='Copy', 1200); }
    finally{ document.body.removeChild(tmp); }
  });

  clearBtn.addEventListener('click', ()=>{ inputEl.value=''; outputEl.innerHTML=''; });

  sampleBtn.addEventListener('click', ()=>{
    const m = currentMode();
    if (m === 'plain→jargon'){
      inputEl.value = `We need to fix the problem, get approval, and schedule a quick meeting. If we cannot do that this week, let us delay and talk later.`;
    } else {
      inputEl.value = `We should socialize the idea to get buy-in, then sync to kick off the pilot. If it is out of scope, we can deprioritize and circle back.`;
    }
    run();
  });

  explainBtn.addEventListener('click', ()=>{
    const res = translate(inputEl.value, currentMode());
    if (!res.changes.length){ alert('No replacements were applied.'); return; }
    // Summarize unique replacements
    const uniq = new Map();
    for (const c of res.changes){
      const k = c.from.toLowerCase() + '→' + c.to.toLowerCase();
      if (!uniq.has(k)) uniq.set(k, {from:c.from, to:c.to, n:0});
      uniq.get(k).n++;
    }
    const lines = [...uniq.values()].map(x=>`• "${x.from}" → "${x.to}"  (×${x.n})`).join('\n');
    alert('Replacements applied:\n\n' + lines);
  });

  shareBtn.addEventListener('click', ()=>{
    const params = new URLSearchParams({
      d: currentMode() === 'plain→jargon' ? 'pj' : 'jp',
      t: inputEl.value
    });
    const url = location.origin + location.pathname + '#' + params.toString();
    navigator.clipboard.writeText(url).then(()=>{
      shareBtn.textContent = 'Link copied'; setTimeout(()=>shareBtn.textContent='Share', 1200);
    });
  });

  // ——— Dictionary table ———
  function renderDict(){
    const data = getDict();
    if (!data.length){ dictTableWrap.innerHTML = '<p class="note">No entries yet.</p>'; return; }

    const rows = data.map((p, i)=>`
      <tr>
        <td><input data-idx="${i}" data-k="plain" type="text" value="${p.plain || ''}" /></td>
        <td><input data-idx="${i}" data-k="jargon" type="text" value="${p.jargon || ''}" /></td>
        <td style="width:1%; white-space:nowrap">
          <button class="btn" data-act="up" data-idx="${i}" title="Move up">↑</button>
          <button class="btn" data-act="down" data-idx="${i}" title="Move down">↓</button>
          <button class="btn warn" data-act="del" data-idx="${i}">Delete</button>
        </td>
      </tr>
    `).join('');

    dictTableWrap.innerHTML = `
      <table aria-label="Dictionary entries"><thead>
        <tr><th>Plain</th><th>Jargon</th><th></th></tr>
      </thead><tbody>${rows}</tbody></table>
      <p class="note">Order matters. Longer phrases should be above shorter ones to avoid partial replacements.</p>
    `;

    // Wire inputs and buttons
    dictTableWrap.querySelectorAll('input').forEach(inp=>{
      inp.addEventListener('change', ()=>{
        const idx = +inp.dataset.idx, key = inp.dataset.k; const arr = getDict();
        arr[idx][key] = inp.value; setDict(arr); run();
      })
    });
    dictTableWrap.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const act = btn.dataset.act, idx = +btn.dataset.idx; const arr = getDict();
        if (act === 'del'){ arr.splice(idx,1); }
        if (act === 'up' && idx>0){ [arr[idx-1], arr[idx]] = [arr[idx], arr[idx-1]]; }
        if (act === 'down' && idx < arr.length-1){ [arr[idx+1], arr[idx]] = [arr[idx], arr[idx+1]]; }
        setDict(arr); renderDict(); run();
      })
    });
  }

  addPairBtn.addEventListener('click', ()=>{
    const a = newPlain.value.trim(); const b = newJargon.value.trim();
    if (!a || !b) { alert('Please fill both Plain and Jargon.'); return; }
    const arr = getDict();
    arr.unshift({plain:a, jargon:b});
    setDict(arr); newPlain.value=''; newJargon.value=''; renderDict();
  });

  // ——— Import / Export ———
  exportBtn.addEventListener('click', ()=>{
    const blob = new Blob([JSON.stringify(getDict(), null, 2)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'jargon-dictionary.json'; a.click(); URL.revokeObjectURL(a.href);
  });
  importFile.addEventListener('change', (e)=>{
    const f = e.target.files[0]; if (!f) return;
    const reader = new FileReader();
    reader.onload = () => {
      try{ const arr = JSON.parse(reader.result);
        if (!Array.isArray(arr)) throw new Error('Invalid');
        setDict(arr); renderDict(); run();
      } catch{
        alert('Could not import. Please provide a JSON array of {plain, jargon} objects.');
      }
    };
    reader.readAsText(f);
  });

  // ——— Hash load (share links) ———
  function loadFromHash(){
    if (!location.hash) return;
    try{
      const sp = new URLSearchParams(location.hash.slice(1));
      const d = sp.get('d'); const t = sp.get('t') || '';
      if (d === 'pj') document.getElementById('m1').checked = true;
      if (d === 'jp') document.getElementById('m2').checked = true;
      inputEl.value = t; run();
    }catch{}
  }

  // Init
  renderDict();
  loadFromHash();
  </script>
</body>
</html>
